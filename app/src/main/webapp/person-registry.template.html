<html>
	<head>
		<title>Person | Person Registry System</title>
		<style>
			div.container {
				display: inline-flex;
				width: 100%;
			}

			div.form {
				width: 30%;
				margin: 16px;
			}

			div.data {
				width: 70%;
				margin: 16px;
			}

			div.form label {
				display: block;
			}

			table, th, td {
				border: 1px solid black;
			}
		</style>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
		<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
		<script>
			var ROLE_MARK_UP = document.createElement('div');
			ROLE_MARK_UP.innerHTML = '<select name="personRoleIds">:queryRoleItems</select><button onclick="this.parentNode.remove()">Remove</button>';
			var CONTACT_MARK_UP = document.createElement('div');
			CONTACT_MARK_UP.innerHTML = "<div><select class=\"assigned-contacts\" name=\"contactType\"><option value=\"Landline\">Landline</option><option value=\"Email\">Email</option><option value=\"Mobile\">Mobile</option></select><button onclick=\"this.parentNode.remove()\">Remove</button><input type=\"text\" name=\"contactData\"></div>";
		</script>
	</head>
	<body>
		<div class="container">
			<div class="form">
				<h3>:message</h3>
				<form action="/" method="POST">
					<input type="hidden" name="mode" value=":mode">
					<input type="hidden" name="id" value=":id">
					:postQueryParameters
					<fieldset>
						<legend><strong>:header</strong></legend>
						<fieldset>
							<legend>Name:</legend>
							<div>
								<label for="title">Title:</label>
								<input type="text" id="title" name="title" value=":title">				
							</div>
							<div>
								<label for="lastName">Last name:</label>
								<input type="text" id="lastName" name="lastName" value=":lastName">
							</div>
							<div>
								<label for="firstName">First name:</label>
								<input type="text" id="firstName" name="firstName" value=":firstName">
							</div>
							<div>
								<label for="middleName">Middle name:</label>
								<input type="text" id="middleName" name="middleName" value=":middleName">
							</div>
							<div>
								<label for="suffix">Suffix:</label>
								<input type="text" id="suffix" name="suffix" value=":suffix">	
							</div>
						</fieldset>
						<fieldset>
							<legend>Address:</legend>
							<div>
								<label for="streetNumber">Street number:</label>
								<input type="text" id="streetNumber" name="streetNumber" value=":streetNumber">	
							</div>
							<div>
								<label for="barangay">Barangay:</label>
								<input type="number" id="barangay" name="barangay" value=":barangay">	
							</div>
							<div>
								<label for="municipality">Municipality:</label>
								<input type="text" id="municipality" name="municipality" value=":municipality">	
							</div>
							<div>
								<label for="zipCode">Zip code:</label>
								<input type="number" id="zipCode" name="zipCode" value=":zipCode">	
							</div>
						</fieldset>
						<fieldset>
							<legend>Other Information:</legend>
							<div>
								<label for="birthday">Birthday:</label>
								<input type="date" id="birthday" name="birthday" value=":birthday">	
							</div>
							<div>
								<label for="GWA">GWA:</label>
								<input type="number" id="GWA" name="GWA" value=":GWA" step="0.001">	
							</div>
							<div>
								<label>Currently employed:</label>
								<input type="radio" name="currentlyEmployed" value="Yes" onclick="document.getElementById('dateHired').disabled=false">Yes</input>	
								<input type="radio" name="currentlyEmployed" value="No" onclick="document.getElementById('dateHired').disabled=true">No</input>
							</div>
							<div>
								<label for="dateHired">Date Hired:</label>
								<input type="date" id="dateHired" name="dateHired" value=":dateHired">
							</div>
						</fieldset>
						<fieldset>
							<legend>Contact Information:</legend>
							:contactsForm
							<button onclick="this.parentNode.insertBefore(CONTACT_MARK_UP.cloneNode(true), this); return false;">Add</button>
						</fieldset>
						<fieldset>
							<legend>Role Assignment:</legend>
							:rolesForm
							<button onclick="this.parentNode.insertBefore(ROLE_MARK_UP.cloneNode(true), this); return false;">Add</button>
						</fieldset>
						<button>Submit</button>
					</fieldset>
				</form>
			</div>
			<div class="data">
				<h3>Persons</h3>
				<form action="/" method="GET">
					<fieldset>
						<legend>Search Parameters</legend>
						<div>
							<label for="queryLastName">Last name:</label>
							<input type="text" id="queryLastName" name="queryLastName" value=":queryLastName">	
						</div>
						<div>
							<label for="queryRoleId">Role:</label>
							<select name="queryRoleId" id="queryRoleId">
								<option value="">All</option>
								:queryRoleItems
							</select>
						</div>
						<div>
							<label for="queryBirthday">Birthday:</label>
							<input type="date" id="queryBirthday" name="queryBirthday" value=":queryBirthday">	
						</div>
						<div>
							<label>Order By:</label>
							<select name="queryOrderBy" id="queryOrderBy">
								<option value="name.lastName">Last Name</option>
								<option value="dateHired">Date Hired</option>
								<option value="GWA">GWA</option>
							</select>
							<select name="queryOrderType" id="queryOrderType">
								<option value="ASC">Ascending</option>
								<option value="DESC">Descending</option>
							</select>
						</div>
						<button>Search</button>
					</fieldset>
				</form>
				:dataTable		
			</div>			
		</div>
	</body>
	<script>
		flatpickr("input[type=date]", {});
		if (':queryOrderBy') {
			document.getElementById('queryOrderBy').value = ':queryOrderBy';		
		}	

		if (':queryOrderType') {
			document.getElementById('queryOrderType').value = ':queryOrderType';		
		}

		if (':queryRoleId') {
			document.getElementById('queryRoleId').value = ':queryRoleId';		
		}

		if (':currentlyEmployed' === 'true') {
			document.getElementById('dateHired').disabled = false;
			document.getElementsByName('currentlyEmployed')[0].checked = true;
		}
		else {
			document.getElementById('dateHired').disabled = true;	
			document.getElementsByName('currentlyEmployed')[1].checked = true;
		}
	</script>
</html>